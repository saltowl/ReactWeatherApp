(this.webpackJsonpreact_weather_app=this.webpackJsonpreact_weather_app||[]).push([[0],{35:function(e,t,a){e.exports=a(66)},40:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(10),r=a(0),i=a.n(r),c=a(12),o=a.n(c),s=(a(40),a(8)),l={weatherList:{cities:[],nextCityId:1},currentCity:{id:0}},u={longitude:30.32,latitude:59.94},d=function(e){return{type:"FETCH_WEATHER_PENDING",id:e}},m=function(e,t){return{type:"FETCH_WEATHER_SUCCESS",id:t,weather:e}},p=function(e,t){return{type:"FETCH_WEATHER_ERROR",id:t,error:e}},h=a(13),f=a.n(h),E=a(34),y=a(31);function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(a,!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var w=function(e){return e.weatherList.cities},O=function(e){return e.weatherList.nextCityId},g=function(e){return e.currentCity},C=Object(y.a)({weatherList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.weatherList,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=[];if(0===t.id)return e;switch(t.type){case"FETCH_WEATHER_PENDING":return a=e.cities.map((function(e){return e.id===t.id?b({},e,{pending:!0}):e})),b({},e,{cities:a});case"FETCH_WEATHER_SUCCESS":return a=e.cities.map((function(e){return e.id===t.id?b({},e,{pending:!1,weather:t.weather}):e})),b({},e,{cities:a});case"FETCH_WEATHER_ERROR":return a=e.cities.map((function(e){return e.id===t.id?b({},e,{pending:!1,error:t.error}):e})),b({},e,{cities:a});case"ADD_CITY":return a=[].concat(Object(E.a)(e.cities),[{id:e.nextCityId,name:t.name}]),b({},e,{nextCityId:e.nextCityId+1,cities:a});case"DELETE_CITY":return a=e.cities.filter((function(e){return e.id!==t.id})),b({},e,{cities:a});default:return e}},currentCity:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.currentCity,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0!==t.id)return e;switch(t.type){case"FETCH_WEATHER_PENDING":return b({},e,{pending:!0});case"FETCH_WEATHER_SUCCESS":return b({},e,{pending:!1,weather:t.weather});case"FETCH_WEATHER_ERROR":return b({},e,{pending:!1,error:t.error});default:return e}}}),j=a(2),N=a(3),x=a(5),W=a(4),T=a(6),D=(a(61),a(14)),I=function(e){function t(e){var a;return Object(j.a)(this,t),(a=Object(x.a)(this,Object(W.a)(t).call(this,e))).textInput=i.a.createRef(),a.handleFormInput=a.handleFormInput.bind(Object(D.a)(a)),a}return Object(T.a)(t,e),Object(N.a)(t,[{key:"handleFormInput",value:function(e){e.preventDefault(),this.props.addCity(this.textInput.current.value)}},{key:"render",value:function(){return i.a.createElement("div",{className:"AddCity"},i.a.createElement("form",{onSubmit:this.handleFormInput},i.a.createElement("input",{id:"addCity",ref:this.textInput,placeholder:"Add new city",required:!0}),i.a.createElement("button",{type:"submit",className:"circle"},"+")))}}]),t}(i.a.Component),P=Object(s.b)((function(e){return{nextCityId:O(e),cities:w(e)}}),(function(e){return{addCity:function(t){return e(function(e){return{type:"ADD_CITY",name:e}}(t))}}}))(I),_=(a(62),function(e){function t(e){return Object(j.a)(this,t),Object(x.a)(this,Object(W.a)(t).call(this,e))}return Object(T.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"Loader"},i.a.createElement("div",null,"Please wait, data is loading"),i.a.createElement("div",null,i.a.createElement("i",{className:"fas fa-spinner fa-pulse"})))}}]),t}(i.a.Component)),S=(a(63),function(e){function t(e){return Object(j.a)(this,t),Object(x.a)(this,Object(W.a)(t).call(this,e))}return Object(T.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchWeather()}},{key:"render",value:function(){var e=0!==this.props.data.id?{flexDirection:"column"}:{flexDirection:"row",width:"100%",fontSize:"30px"},t=0!==this.props.data.id?{flexDirection:"row"}:{flexDirection:"column",width:"50%",paddingRight:"20px"},a=0!==this.props.data.id?{width:"100%"}:{width:"50%",paddingLeft:"20px",boxSizing:"border-box"};if(this.props.data.error){var r=this.props.data.error;return i.a.createElement("div",Object(n.a)({className:"Weather"},"className","error"),404===r.response.status&&i.a.createElement("div",null,this.props.data.name," isn't found"),i.a.createElement("button",{onClick:this.props.deleteCity,className:"circle"},"x"))}if(!1===this.props.data.pending){var c=this.props.data.weather,o="".concat(c.main.temp<0?"":"+").concat(c.main.temp.toFixed(1),"\xb0C"),s=0!==this.props.data.id?"https://openweathermap.org/img/wn/".concat(c.weather[0].icon,".png"):"https://openweathermap.org/themes/openweathermap/assets/vendor/owm/img/widgets/".concat(c.weather[0].icon,".png"),l=c.weather[0].description[0].toUpperCase()+c.weather[0].description.substr(1),u="rotate(".concat(c.wind.deg,"deg)"),d={WebkitTransform:u,msTransform:u,OTransform:u,transform:u},m="".concat(c.wind.speed," m/s"),p="".concat((.75006375541921*c.main.pressure).toFixed(0)," mmHg"),h="".concat(c.main.humidity,"%"),f=[c.coord.lon,c.coord.lat];return i.a.createElement("div",{className:"Weather",style:e},i.a.createElement("div",{className:"mainInfo",style:t},i.a.createElement("div",{className:0===this.props.data.id?"currentName":"name"},c.name),i.a.createElement("div",{className:"".concat(0===this.props.data.id?"current":""," cityMain")},i.a.createElement("div",{className:0===this.props.data.id&&"temp"},o),i.a.createElement("img",{src:s,title:l})),i.a.createElement("div",{className:0===this.props.data.id?"current":""},0!==this.props.data.id&&i.a.createElement("button",{onClick:this.props.deleteCity,className:"circle"},"x"))),i.a.createElement("div",{style:a},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"rowKey"},"Wind:"),i.a.createElement("div",{className:"rowVal"},i.a.createElement("div",{id:"wind"},i.a.createElement("div",{id:"N"},"N"),i.a.createElement("div",{id:"W"},"W"),i.a.createElement("div",{id:"windDirection"},i.a.createElement("div",{style:d},"\u2191")),i.a.createElement("div",{id:"E"},"E"),i.a.createElement("div",{id:"S"},"S")),m)),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"rowKey"},"Clouds:"),i.a.createElement("div",{className:"rowVal"},c.clouds.all,"%")),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"rowKey"},"Pressure:"),i.a.createElement("div",{className:"rowVal"},p)),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"rowKey"},"Humidity:"),i.a.createElement("div",{className:"rowVal"},h)),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"rowKey"},"Coords:"),i.a.createElement("div",{className:"rowVal"},"[",f[0],", ",f[1],"]"))))}return i.a.createElement("div",{className:"Weather",style:{justifyContent:"flex-start"}},0!==this.props.data.id&&i.a.createElement("div",{style:{padding:"8px"}},this.props.data.name),i.a.createElement(_,null))}}]),t}(i.a.Component)),R=function(e){function t(e){return Object(j.a)(this,t),Object(x.a)(this,Object(W.a)(t).call(this,e))}return Object(T.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"WeatherList"},this.props.cities.map((function(t){return i.a.createElement(S,{key:t.id,data:t,fetchWeather:function(){return e.props.fetchWeatherByName(t.id,t.name)},deleteCity:function(){return e.props.deleteCity(t.id)}})})))}}]),t}(i.a.Component),H=Object(s.b)((function(e){return{cities:w(e),nextCityId:O(e)}}),(function(e){return{fetchWeatherByName:function(t,a){return function(e,t,a){e(d(t)),f.a.get("https://api.openweathermap.org/data/2.5/weather?q=".concat(a,"&units=metric&APPID=96c2fc4713551153e7966978b449861a")).then((function(a){e(m(a.data,t)),console.log(a.data)})).catch((function(a){e(p(a,t)),console.log(a)}))}(e,t,a)},deleteCity:function(t){return e(function(e){return{type:"DELETE_CITY",id:e}}(t))}}}))(R),k=(a(64),a(65),function(){for(var e=[],t=1;t<=10;t++)e.push("x"+t);return e=e.map((function(e){return i.a.createElement("div",{className:"cloud ".concat(e),key:e})})),i.a.createElement("div",{className:"clouds"},e)}),A=function(e){function t(e){return Object(j.a)(this,t),Object(x.a)(this,Object(W.a)(t).call(this,e))}return Object(T.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement(k,null),i.a.createElement("div",{className:"App"},i.a.createElement("div",{className:"control",style:{width:"67%",alignSelf:"flex-start"}},i.a.createElement("h2",null,"Weather here"),i.a.createElement("button",{onClick:function(){return e.props.fetchWeatherByCoords()}},"Update geolocation")),i.a.createElement(S,{key:0,data:this.props.currentCity,fetchWeather:function(){return e.props.fetchWeatherByCoords()}}),i.a.createElement("div",{className:"control favourites"},i.a.createElement("h2",null,"Favorites"),i.a.createElement(P,null)),i.a.createElement(H,null)))}}]),t}(i.a.Component),F=function(e,t,a){f.a.get("https://api.openweathermap.org/data/2.5/weather?lat=".concat(t.latitude,"&lon=").concat(t.longitude,"&units=metric&APPID=96c2fc4713551153e7966978b449861a")).then((function(t){e(m(t.data,a)),console.log(t.data)})).catch((function(t){e(p(t,a)),console.log(t),t.response.status}))},L=Object(s.b)((function(e){return{currentCity:g(e)}}),(function(e){return{fetchWeatherByCoords:function(){return function(e){if(e(d(0)),navigator.geolocation)navigator.geolocation.getCurrentPosition((function(t){F(e,t.coords,0)}),(function(t){1===t.code?F(e,u,0):(e(p(t,0)),console.warn("ERROR(".concat(t.code,"): ").concat(t.message)))}),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0});else{var t="Geolocation is not supported";e(p(t,0)),console.log(t)}}(e)}}}))(A);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var B=a(11),K=a(33);function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(a,!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var G=localStorage["redux-store"]?JSON.parse(localStorage["redux-store"]):[],J=G.reduce((function(e,t){return Math.max(e,t.id)}),0)+1,Y=V({},l,{weatherList:V({},l.weatherList,{cities:G,nextCityId:J})}),M=Object(B.c)(C,Y,Object(B.a)(K.a));M.subscribe((function(){localStorage["redux-store"]=JSON.stringify(M.getState().weatherList.cities.map((function(e){return{id:e.id,name:e.name}})))})),o.a.render(i.a.createElement(s.a,{store:M},i.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[35,1,2]]]);
//# sourceMappingURL=main.db244f8c.chunk.js.map